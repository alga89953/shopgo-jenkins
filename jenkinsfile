// pipeline {
//     agent any
//     environment {
//         GOOGLE_SERVICES_JSON = credentials('google-services-json') // Aquí debes configurar las credenciales para Firebase
//     }
//     stages {
//         stage('Fetch') { 
//             steps {
//                 sh "${env.SOURCE}; dart pub get" 
//             }
//         } 
//         stage('Build') {
//             steps {
//                 sh "${env.SOURCE}; dart run lib/main.dart"
//             }
//         }
//         stage('Lint') {
//             steps {
//                 sh "${env.SOURCE}; dart analyze"
//             }
//         }
//         stage('Test') {
//             steps {
//                 sh "${env.SOURCE}; flutter test"
//             }
//         }
//         stage('Firebase Setup') {
//             steps {
//                 // Aquí se configura Firebase con las credenciales
//                 sh """
//                     echo '$GOOGLE_SERVICES_JSON' > google-services.json
//                     flutter pub get
//                     flutter pub run firebase_core:write-initialization-settings --auto
//                     flutter pub run firebase_auth:firebase_auth
//                 """
//             }
//         }
//         stage('Clean') {
//             steps {
//                 cleanWs deleteDirs: true, notFailBuild: true            
//             }
//         } 
//     }
// }


//La configuracion de la web
// pipeline{
//     agent any
//     stages{
//         stage('Build'){
//             steps{
//                 echo "Etapas BUILD no disponible"

//             }
//         }
//         stage ('Tests'){
//             steps {
//                 echo "Etapa TEST no disponible"

//             }
//         }
//         stage ('Deploy')
//         steps{
//             sh "doker-compose down -v"
//         }
//     }
//}


// // //Configuracion de flutter app movil
// pipeline {
//     agent any

//     stages {
//         stage('Preparación') {
//             steps {
//                 sh 'flutter pub get'
//             }
//         }

//         stage('Compilación') {
//             steps {
//                 sh 'fastlane build'
//             }
//             //clear
//         }

//         stage('Pruebas') {
//             steps {
//                 sh 'fastlane test'
//             }
//         }

//         stage('Deploy') {
//             steps {
//                 sh 'fastlane deploy'
//             }
//         }
//     }
// }

// // //Bitbucket
pipeline{
            //This line is to tell Jenkins which agent should run the pipeline
            agent any 
            stages{
                stage('Fetch'){ 
                    steps{
                        sh"${env.SOURCE}; dart pub get" 
                    }
                } 
                stage('Build'){
                    steps{
                        sh"${env.SOURCE}; dart run lib/main.dart"
                    }
                }
                stage('Lint'){
                    steps{
                        sh"${env.SOURCE}; dart analyze"
                    }
                }
                stage('Test'){
                    steps{
                        sh"${env.SOURCE}; flutter test"
                    }
                }
                stage('Clean'){
                    steps{
                        cleanWs deleteDirs: true, notFailBuild: true            
                    }
                } 
            }
        }
