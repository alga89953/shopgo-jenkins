// pipeline {
//     agent any
//     environment {
//         GOOGLE_SERVICES_JSON = credentials('google-services-json') // Aqu√≠ debes configurar las credenciales para Firebase
//     }
//     stages {
//         stage('Fetch') { 
//             steps {
//                 sh "${env.SOURCE}; dart pub get" 
//             }
pipeline{
            
            agent any 
            stages{
                stage('Fetch'){ 
                    steps{
                        sh"dart pub get" 
                    }
                } 
                stage('Build'){
                    steps{
                        sh"dart run lib/main.dart"
                    }
                }
                stage('Lint'){
                    steps{
                        sh"dart analyze"
                    }
                }
                stage('Test'){
                    steps{
                        sh"flutter test"
                    }
                }
                stage('Clean'){
                    steps{
                        cleanWs deleteDirs: true, notFailBuild: true            
                    }
                } 
            }
        }
